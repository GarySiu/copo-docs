<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Coposition API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="javascript">node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.coposition.com/developers/sign_up'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Coposition! You can use our API to securely store and retrieve geolocation info associated with devices and users. You can also use the api
to view and manage permissions.</p>

<p>You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="c1">// For brevity, the node code samples use</span>
<span class="c1">// the Request module (https://www.npmjs.com/package/request)</span>
<span class="c1">// But feel free to use whatever method you prefer</span>
<span class="c1">// to make http requests</span>

<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'HTTP_VERB_HERE'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'API_ENDPOINT_HERE'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">}</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>
<pre class="highlight shell"><code><span class="c"># With cURL, you can just pass the correct header with each request</span>
curl <span class="s2">"API_ENDPOINT_HERE"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">YOUR_API_KEY_HERE</code> with your API key.</p>
</blockquote>

<p>Coposition uses API keys to allow access to the API. You can register a new Coposition API key at our <a href="https://coposition.com/developers/console">developer console</a>.</p>

<p>Coposition expects for the API key to be included in all API requests to the server in a custom header that looks like the following:</p>

<p><code class="prettyprint">X-Api-Key: YOUR_API_KEY_HERE</code></p>

<aside class="notice">
You must replace <code>YOUR_API_KEY_HERE</code> with your personal API key.
</aside>

<h1 id="uuid">UUID</h1>

<p>All hardware is identified by a <strong>universally unique identifier</strong> (UUID). This is because not all devices share the same identifying marks e.g. serial numbers, IMEI so we create an
artificial one to standardize on.</p>

<h2 id="create-a-new-uuid">Create a new UUID</h2>

<p>UUID&rsquo;s can be pre-generated to allow you to uniquely identify a device after manufacture.</p>

<blockquote>
<p>At the moment: 1 request = 1 UUID.</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/uuid"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/uuid'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">}</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d274e7c-76ab-45e7-8d96-ef063ad725f8"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/uuid</code></p>

<aside class="success">
Remember your API key!
</aside>

<h1 id="check-ins">Check-ins</h1>

<p>A check-in is our basic unit of geolocation information. At it&rsquo;s simplest it contains a latlong point, and the ID of the device it belongs to.</p>

<h2 id="create-a-new-check-in">Create a new check-in</h2>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.coposition.com/v1/checkins"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"X-UUID"</span>: <span class="s2">"DEVICE-UUID-HERE"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "lat" : "51.588330",
    "lng" : "-0.513069"
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/checkins'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-UUID'</span><span class="p">:</span> <span class="s1">'DEVICE-UUID-HERE'</span>
     <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">lat</span><span class="p">:</span> <span class="s1">'51.588330'</span><span class="p">,</span> <span class="na">lng</span><span class="p">:</span> <span class="s1">'-0.513069'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41649</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.58833</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.513069</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-26T13:06:07.549Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-26T13:06:08.214Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b64f4dbb-7981-44bd-88a8-d9626259f720"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No address available"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged_lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.60333</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged_lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.48546</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Harefield"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.coposition.com/v1/checkins</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="javascript">node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
