<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Coposition API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="javascript">node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.coposition.com/developers/sign_up'>Sign Up for a Developer Key</a></li>
            <li>~or~</li>
            <li><a href="https://coposition.com/developers/console">Log In to your Developer Console</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Coposition! You can use our API to securely store and retrieve geolocation info associated with devices and users. You can also use the api
to view and manage permissions.</p>

<p>You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight javascript"><code><span class="c1">// For brevity, the node code samples use</span>
<span class="c1">// the Request module (https://www.npmjs.com/package/request)</span>
<span class="c1">// But feel free to use whatever method you prefer</span>
<span class="c1">// to make http requests</span>

<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'HTTP_VERB_HERE'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'API_ENDPOINT_HERE'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">}</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>
<pre class="highlight shell"><code><span class="c"># With cURL, you can just pass the correct header with each request</span>
curl <span class="s2">"API_ENDPOINT_HERE"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">YOUR_API_KEY_HERE</code> with your API key.</p>
</blockquote>

<p>Coposition uses custom HTTP headers to control access to different parts of the API. All API requests are expected to have an API key header:</p>

<p><code class="prettyprint">X-Api-Key: YOUR_API_KEY_HERE</code></p>

<p>You can get a new Coposition API key from your <a href="https://coposition.com/developers/console">developer console</a>.</p>

<aside class="notice">
You must replace <code>YOUR_API_KEY_HERE</code> with your personal API key.
</aside>

<p>Other custom headers used by the API are shown below. We&rsquo;ll revisit them when they&rsquo;re required.</p>

<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>X-Secret-App-Key</td>
<td>Exclusively used by the Coposition app</td>
</tr>
<tr>
<td>X-User-Token</td>
<td>Authentication token returned on sign in/sign up, destroyed on sign out.</td>
</tr>
<tr>
<td>X-UUID</td>
<td>Unique identifier associated with a specific device in our database.</td>
</tr>
<tr>
<td>X-User-Email</td>
<td>User&rsquo;s email address</td>
</tr>
<tr>
<td>X-User-Password</td>
<td>User&rsquo;s password</td>
</tr>
</tbody></table>

<h1 id="uuid">UUID</h1>

<p>All hardware is identified by a <strong>universally unique identifier</strong> (UUID). This is because not all devices share the same identifying marks e.g. serial numbers, IMEI so we create an
artificial one to standardize on.</p>

<h2 id="create-a-new-uuid">Create a new UUID</h2>

<p>UUID&rsquo;s can be pre-generated to allow you to uniquely identify a device after manufacture.</p>

<blockquote>
<p>At the moment: 1 request = 1 UUID.</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/uuid"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/uuid'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">}</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d274e7c-76ab-45e7-8d96-ef063ad725f8"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/uuid</code></p>

<aside class="success">
Remember your API key!
</aside>

          <h1 id="check-ins">Check-ins</h1>

<p>A check-in is our basic unit of geolocation information. It has a latitude, longitude and the UUID of the device it belongs to. It can also contain an address and privacy information.</p>

<h2 id="check-in-privacy">Check-in privacy</h2>

<p>Coposition allows you to pass a less specific location on to your friends and apps. We call this &ldquo;fogging&rdquo;. A check-in&rsquo;s fogged location is either the centre of the nearest named urban area with a population of more than 1000 people (usually a city district, borough, town, village or suburb). If there isn&rsquo;t one within 200 miles, it is assigned a random location &plusmn;0.5 decimal degrees of latitude/longitude. This information is saved to the check-in so you can consistently report the same location.</p>

<p>You may also delay sharing a check-in to a less sensitive time by changing the delay property on the parent device.</p>

<h2 id="create-a-new-check-in">Create a new check-in</h2>

<p>A latitude and longitude are required. You can also provide a created at date and time in the format &ldquo;yyyy-mm-dd [hh:mm:ss]&rdquo;.</p>
<pre class="highlight shell"><code>curl -X PUT <span class="s2">"https://api.coposition.com/v1/checkins"</span>
     -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
     -H <span class="s2">"Content-Type: application/json"</span>
     -H <span class="s2">"X-UUID"</span>: <span class="s2">"DEVICE-UUID-HERE"</span>
     -H <span class="s2">"Cache-Control: no-cache"</span>
     -d <span class="s1">'{
      "lat" : "51.588330",
      "lng" : "-0.513069",
      "created_at" : "2016-10-31 [10:30:12]"
     }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/checkins'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-UUID'</span><span class="p">:</span> <span class="s1">'DEVICE-UUID-HERE'</span>
     <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">lat</span><span class="p">:</span> <span class="s1">'51.588330'</span><span class="p">,</span> <span class="na">lng</span><span class="p">:</span> <span class="s1">'-0.513069'</span><span class="p">,</span> <span class="na">created_at</span> <span class="p">:</span> <span class="s1">'2016-10-31 [10:30:12]'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41649</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.58833</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.513069</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-31T10:30:12.549Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-31T10:30:12.214Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b64f4dbb-7981-44bd-88a8-d9626259f720"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No address available"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged_lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.60333</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged_lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.48546</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Harefield"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.coposition.com/v1/checkins</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-key</code>
<code class="prettyprint">X-UUID</code>
<code class="prettyprint">Content-Type</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>lat</td>
<td>-180/+180</td>
</tr>
<tr>
<td>lng</td>
<td>-180/+180</td>
</tr>
<tr>
<td>created_at <em>(optional)</em></td>
<td>A valid <a href="http://ruby-doc.org/stdlib-2.3.0/libdoc/date/rdoc/DateTime.html#method-c-parse">Ruby datetime</a> value e.g. &ldquo;yyyy-mm-dd [hh:mm:ss]&rdquo;</td>
</tr>
</tbody></table>

<h2 id="get-a-list-of-user-checkins">Get a list of user checkins</h2>

<p>Get a list of a user&rsquo;s checkins, you can choose to geocode the checkins to get a full address if available, you can specific a device from which you want checkins from and how many checkins you want to receive.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com}v1/users/USER_ID/devices/DEVICE_ID/checkins/"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com}v1/users/USER_ID/devices/DEVICE_ID/checkins/'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'x-api-key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">18546</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.513977</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.234924</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-12T17:10:55.776Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-13T09:23:33.125Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Community Centre, India Way, White City, London W12 7AQ, UK"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"W12 7AQ"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GB"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">18544</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.587736</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.302124</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-11T14:36:15.604Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-12T14:23:46.519Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 Westfield Ln, Harrow, Greater London HA3 9EA, UK"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Harrow"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HA3 9EA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"country_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GB"</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p>For checkins for a user.</p>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID/checkins</code></p>

<p>Just the last checkin</p>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID/checkins/last</code></p>

<h4 id="optional-filters">Optional filters</h4>

<p>You can specify additional filtering in the query string</p>

<table><thead>
<tr>
<th>Option</th>
<th>Query string</th>
</tr>
</thead><tbody>
<tr>
<td>Filter by device</td>
<td><code class="prettyprint">?device_id=DEVICE_ID</code></td>
</tr>
<tr>
<td>Geocode/show street address</td>
<td><code class="prettyprint">?type=address</code></td>
</tr>
<tr>
<td>Page and results per page (default 30 max 1000)</td>
<td><code class="prettyprint">?per_page=100&amp;page=2</code></td>
</tr>
</tbody></table>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

          <h1 id="sign-up">Sign up</h1>

<h2 id="signing-up-for-coposition">Signing up for coposition</h2>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://coposition.com/users"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"X-Secret-App-Key: SECRET_APP_KEY_HERE"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "user" : {
      "email" : USER_EMAIL,
      "password" : USER_PASSWORD,
      "username" : USERNAME
      }
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://coposition.com/users'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Secret-App-Key'</span><span class="p">:</span> <span class="s1">'SECRET_APP_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="nx">USER_EMAIL</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">USER_PASSWORD</span><span class="p">,</span> <span class="na">username</span><span class="p">:</span> <span class="nx">USERNAME</span> <span class="p">}</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-17T10:21:11.635Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-17T10:21:11.635Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"connection_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e64fd7-ec73-4fd9-9a73-a41071158085"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"authentication_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3NTUtBNX_3WGRogc6HzB"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://coposition.com/users</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Secret-App-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>email, password, username</td>
</tr>
<tr>
<td>email</td>
<td>&ldquo;example@email.com&rdquo;</td>
</tr>
<tr>
<td>password</td>
<td>&ldquo;password&rdquo; (&gt;8 characters)</td>
</tr>
<tr>
<td>username</td>
<td>&ldquo;example&rdquo;</td>
</tr>
</tbody></table>

          <h1 id="log-in-out">Log in/out</h1>

<h2 id="logging-into-an-account">Logging into an account</h2>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://coposition.com/users/sign_in"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"X-Secret-App-Key: SECRET_APP_KEY_HERE"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "user" : {
      "email" : USER_EMAIL,
      "password" : USER_PASSWORD
      }
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://coposition.com/users/sign_in'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Secret-App-Key'</span><span class="p">:</span> <span class="s1">'SECRET_APP_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="nx">USER_EMAIL</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="nx">USER_PASSWORD</span> <span class="p">}</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_ID"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_EMAIL"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USERNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"authentication_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTH_TOKEN"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://coposition.com/users/sign_in</code></p>

<h3 id="headers">Headers</h3>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>email, password</td>
</tr>
<tr>
<td>email</td>
<td>&ldquo;example@email.com&rdquo;</td>
</tr>
<tr>
<td>password</td>
<td>&ldquo;password&rdquo;</td>
</tr>
</tbody></table>

<p><code class="prettyprint">X-Secret-App-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h2 id="logging-out-an-account">Logging out an account</h2>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://coposition.com/users/sign_out"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"X-Secret-App-Key: SECRET_APP_KEY_HERE"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -H <span class="s2">"X-User-Token"</span>: USER_TOKEN
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://coposition.com/users/sign_out'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Secret-App-Key'</span><span class="p">:</span> <span class="s1">'SECRET_APP_KEY_HERE'</span><span class="p">,</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_TOKEN'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signed out"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://coposition.com/users/sign_out</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Secret-App-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

          <h1 id="devices">Devices</h1>

<h2 id="creating-a-new-device">Creating a new device</h2>

<p>Creates a new device for the current user.</p>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.coposition.com/v1/users/USER_ID/devices"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"X-User-Token: USER_AUTH_TOKEN"</span>
  -H <span class="s2">"X-User-Email: USER_EMAIL"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "device" : {
      "name" : DEVICE_NAME,
      }
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/devices'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span><span class="p">,</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_AUTH_TOKEN'</span><span class="p">,</span>
     <span class="s1">'X-User-Email'</span><span class="p">:</span> <span class="s1">'USER_EMAIL'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">device</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="nx">DEVICE_NAME</span> <span class="p">}</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbd002bd-20d6-412e-b756-e5ab058713ca"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"laptop"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"delayed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alias"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.coposition.com/v1/users/USER_ID/devices</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">X-User-Email</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>device</td>
<td>name</td>
</tr>
<tr>
<td>name</td>
<td>&ldquo;device name&rdquo;</td>
</tr>
</tbody></table>

<h2 id="get-a-list-of-user-39-s-devices">Get a list of user&rsquo;s devices</h2>

<p>Returns a list of devices belonging to the specified user. The user must have approved your App.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/users/USER_ID/devices"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/devices'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbd002bd-20d6-412e-b756-e5ab058713ca"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"laptop"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"delayed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alias"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbd002bd-20d6-412e-b756-e5ab058713ca"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"laptop"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"delayed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alias"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID/devices</code></p>

<p>For a specific device</p>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h2 id="update-device-settings">Update device settings</h2>

<p>You can fog, delay or share a device. Checkins created while a device is fogged will have their address shown as the nearest city rather than the exact location. Delay works by not making checkins available to your data consumers until x minutes after they have been created. Publishing a device allows anyone with a coposition account access to your latest fogged or unfogged location for this device.</p>
<pre class="highlight shell"><code>curl -X PUT <span class="s2">"https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"X-User-Token: USER_AUTH_TOKEN"</span>
  -H <span class="s2">"X-User-Email: USER_EMAIL"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "fogged" : false,
    "delayed" : 10,
    "published" : true
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_AUTH_TOKEN'</span><span class="p">,</span>
     <span class="s1">'X-User-Email'</span><span class="p">:</span> <span class="s1">'USER_EMAIL'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">fogged</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>  <span class="na">delayed</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">published</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w">
    </span><span class="nt">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fbd002bd-20d6-412e-b756-e5ab058713ca"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"laptop"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fogged"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"delayed"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alias"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">X-User-Email</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>fogged</td>
<td>boolean</td>
</tr>
<tr>
<td>delayed</td>
<td>integer (number of minutes)</td>
</tr>
<tr>
<td>published</td>
<td>boolean</td>
</tr>
</tbody></table>

          <h1 id="approvals">Approvals</h1>

<h2 id="asking-for-approval">Asking for approval</h2>

<p>Use this endpoint to create a pending approval between an App/User and the current User.</p>
<pre class="highlight shell"><code>curl -X POST <span class="s2">"https://api.coposition.com/v1/users/USER_ID/approvals/"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"X-Secret-App-Key: SECRET_APP_KEY"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "approval" : {
      "approvable": DEVELOPER_ID,
      "approvable_type": "Developer"
      }
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/approvals/'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span>
     <span class="s1">'X-Secret-App-Key'</span><span class="p">:</span> <span class="s1">'SECRET_APP_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">approval</span><span class="p">:</span> <span class="p">{</span> <span class="na">approvable</span><span class="p">:</span> <span class="nx">DEVELOPER_ID</span><span class="p">,</span> <span class="na">approvable_type</span><span class="p">:</span> <span class="s1">'Developer'</span> <span class="p">}</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">103</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approvable_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approval_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-17T09:34:24.118Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-19T09:44:55.319Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-17T09:34:24.120Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approvable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Developer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.coposition.com/v1/users/USER_ID/approvals/</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-Secret-App-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>approval</td>
<td>approvable, approvable_type</td>
</tr>
<tr>
<td>approvable</td>
<td>integer (id of user/developer)</td>
</tr>
<tr>
<td>approvable_type</td>
<td>&lsquo;User&rsquo; or &#39;Developer&rsquo;</td>
</tr>
</tbody></table>

<h2 id="getting-a-list-of-approvals-including-pending-approvals">Getting a list of approvals including pending approvals</h2>

<p>Gets a list of accepted/pending approvals belonging to a user. Returns the approval_id which is used in approved/rejecting an approval.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/users/USER_ID/approvals/"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"X-User-Token: USER_AUTH_TOKEN"</span>
  -H <span class="s2">"X-User-Email: USER_EMAIL"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/approvals/'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_AUTH_TOKEN'</span><span class="p">,</span>
     <span class="s1">'X-User-Email'</span><span class="p">:</span> <span class="s1">'USER_EMAIL'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
    </span><span class="nt">"approvable_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"approval_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-19T14:37:15.214Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-19T14:36:37.646Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-19T14:37:15.215Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"approvable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
    </span><span class="nt">"approvable_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"approval_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T10:42:01.470Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T10:42:01.470Z"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"approvable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID/approvals/</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">X-User-Email</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h2 id="approving-rejecting-revoking-an-approval">Approving/Rejecting/Revoking an approval</h2>

<p>User needs to approve an approval in order to let a friend/app see their location data. A user can also choose to reject an approval or revoke an existing approval.</p>
<pre class="highlight shell"><code>curl -X PUT <span class="s2">"https://api.coposition.com/v1/users/USER_ID/approvals/APPROVAL_ID"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"X-User-Token: USER_AUTH_TOKEN"</span>
  -H <span class="s2">"X-User-Email: USER_EMAIL"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "approval" : {
      "status": "accepted" OR "revoked"
      }
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/approvals/APPROVAL_ID'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span><span class="p">,</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_AUTH_TOKEN'</span><span class="p">,</span>
     <span class="s1">'X-User-Email'</span><span class="p">:</span> <span class="s1">'USER_EMAIL'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">approval</span><span class="p">:</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="s1">'accepted'</span> <span class="nx">OR</span> <span class="s1">'revoked'</span> <span class="p">}</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approvable_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approval_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-17T10:14:58.023Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-17T10:42:01.470Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-05-17T10:14:58.028Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"approvable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT https://api.coposition.com/v1/users/USER_ID/approvals/APPROVAL_ID</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">X-User-Email</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>approval</td>
<td>status</td>
</tr>
<tr>
<td>status</td>
<td>&#39;accepted&rsquo; or &#39;revoked&rsquo;</td>
</tr>
</tbody></table>

          <h1 id="permissions">Permissions</h1>

<h2 id="listing-permissions">Listing Permissions</h2>

<p>Lists all of a device permission settings, returns id of permission which can be used for updating a permission.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"X-User-Token: USER_AUTH_TOKEN"</span>
  -H <span class="s2">"X-User-Email: USER_EMAIL"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_AUTH_TOKEN'</span><span class="p">,</span>
     <span class="s1">'X-User-Email'</span><span class="p">:</span> <span class="s1">'USER_EMAIL'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">294</span><span class="p">,</span><span class="w">
    </span><span class="nt">"permissible_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"privilege"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"permissible_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bypass_fogging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bypass_delay"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">395</span><span class="p">,</span><span class="w">
    </span><span class="nt">"permissible_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"privilege"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"permissible_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bypass_fogging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bypass_delay"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">X-User-Email</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h2 id="edit-permissions">Edit Permissions</h2>

<p>Update device permissions for a Developer/App or User. Permission settings include privilege level, bypass fogging and bypass delay. Privilege level controls the access a consumer has, disallowed, last_only (can only view last checkin) or complete.</p>
<pre class="highlight shell"><code>curl -X PUT <span class="s2">"https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions/PERMISSION_ID"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"X-User-Token: USER_AUTH_TOKEN"</span>
  -H <span class="s2">"X-User-Email: USER_EMAIL"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -d <span class="s1">'{
    "privilege" : "complete",
    "bypass_fogging" : "true",
    "bypass_delay" : "true"
    }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions/PERMISSION_ID'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span>
     <span class="s1">'X-User-Token'</span><span class="p">:</span> <span class="s1">'USER_AUTH_TOKEN'</span><span class="p">,</span>
     <span class="s1">'X-User-Email'</span><span class="p">:</span> <span class="s1">'USER_EMAIL'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span> <span class="na">privilege</span><span class="p">:</span> <span class="s2">"complete"</span><span class="p">,</span> <span class="na">bypass_fogging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">bypass_delay</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">293</span><span class="p">,</span><span class="w">
  </span><span class="nt">"permissible_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"privilege"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"permissible_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bypass_fogging"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bypass_delay"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions/PERMISSION_ID</code></p>

<p>To update all permissions for a specific device, use the endpoint:</p>

<p><code class="prettyprint">PUT https://api.coposition.com/v1/users/USER_ID/devices/DEVICE_ID/permissions</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-User-Token</code>
<code class="prettyprint">X-User-Email</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

<h3 id="body">Body</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>privilege</td>
<td>&lsquo;complete&rsquo;, &#39;last_only&rsquo;, &#39;disallowed&rsquo;</td>
</tr>
<tr>
<td>bypass_fogging</td>
<td>boolean</td>
</tr>
<tr>
<td>bypass_delay</td>
<td>boolean</td>
</tr>
</tbody></table>

          <h1 id="users">Users</h1>

<h2 id="showing-user-info">Showing user info</h2>

<p>Allows you to view user info such as username and ID which can be used in creating/updating an approval or updating permissions for a device.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/users/USER_ID"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
  -H <span class="s2">"X-Secret-App-Key: SECRET_APP_KEY"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/users/USER_ID'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span>
     <span class="s1">'X-Secret-App-Key'</span><span class="p">:</span> <span class="s1">'SECRET_APP_KEY'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delia.kirlin@ortiz.biz"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coporulez"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coporulez"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/users/USER_ID</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">X-Secret-App-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

          <h1 id="developers">Developers</h1>

<h2 id="showing-developer-info">Showing developer info</h2>

<p>Allows you to view developer info such as Company name and ID which can be used in creating/updating an approval or updating permissions for a device.</p>
<pre class="highlight shell"><code>curl -X GET <span class="s2">"https://api.coposition.com/v1/developers/DEVELOPER_ID"</span>
  -H <span class="s2">"X-Api-Key: YOUR_API_KEY_HERE"</span>
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Cache-Control: no-cache"</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"request"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.coposition.com/v1/developers/DEVELOPER_ID'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span>
   <span class="p">{</span> <span class="s1">'cache-control'</span><span class="p">:</span> <span class="s1">'no-cache'</span><span class="p">,</span>
     <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
     <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s1">'YOUR_API_KEY_HERE'</span> <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orland@kulasrolfson.net"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"company_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fakebook"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tagline"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://kaulkerenner.biz/"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.coposition.com/v1/developers/DEVELOPER_ID</code></p>

<p>List of all developers</p>

<p><code class="prettyprint">GET https://api.coposition.com/v1/developers</code></p>

<h3 id="headers">Headers</h3>

<p><code class="prettyprint">X-Api-Key</code>
<code class="prettyprint">Content-Type</code>
<code class="prettyprint">Cache-Control</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="javascript">node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
